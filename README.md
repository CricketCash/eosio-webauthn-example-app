## Build and run

```
yarn
rm -rf node_modules/eosjs && bash -c "cd external/eosjs && yarn" && yarn add file:external/eosjs
rm -rf dist && yarn server
```

Connect to http://localhost:8000

## Limitations

* server only supports a single client (browser tab) connecting to it
* server only supports a single user; it assumes all stored keys belong to that user
* server only supports a single hardware key; it assumes all stored keys came from that key
* `createKey` in `ClientRoot.tsx`
    * assumes it's served from localhost; other domains will break
    * hard codes the `user` field
    * hard codes the `challenge` field; this should be randomly generated by the server then checked by the server
* If `keys.json` (maintained by the server) is lost, then the keypairs become inaccessible. Webauthn doesn't provide a way to recover from this.

## Future

* eosjs doesn't support the new key types in action data or in tables yet
* abieos doesn't support the new key types

## Creating test chain

```
rm -rf my-chain
mkdir my-chain
cd my-chain
~/eos2/build/programs/nodeos/nodeos -d ./data --config-dir ./config --plugin eosio::chain_api_plugin --plugin eosio::producer_api_plugin --http-validate-host 0 --access-control-allow-origin "*" -p eosio -e 2>stderr &

~/eos2/build/programs/cleos/cleos wallet import --private-key 5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3
~/eos2/build/programs/cleos/cleos create account eosio eosio.token EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV
~/eos2/build/programs/cleos/cleos set contract eosio.token ~/eosio.contracts3/build/contracts/eosio.token -p eosio.token
~/eos2/build/programs/cleos/cleos push action eosio.token create '["eosio","10000000.0000 SYS"]' -p eosio.token
```

Use app to generate 2 keys. Use them below:

```
~/eos2/build/programs/cleos/cleos create account eosio usera PUB_WA_.....
~/eos2/build/programs/cleos/cleos create account eosio userb PUB_WA_.....
~/eos2/build/programs/cleos/cleos push action eosio.token issue '["usera","1000.0000 SYS",""]' -p eosio
~/eos2/build/programs/cleos/cleos push action eosio.token issue '["userb","1000.0000 SYS",""]' -p eosio
```
